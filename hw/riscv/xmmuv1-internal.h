#ifndef HW_RISCV_XMMUV1_INTERNAL_H
#define HW_RISCV_XMMUV1_INTERNAL_H

#include "hw/riscv/xmmu-common.h"

#define RSIDLEN 16
/* MMIO Registers */
REG64(IOMMUCAP, 0x0)
REG64(DTBASE, 0x18)
REG64(IOMMUCAUSE, 0x20)
REG64(FTVAL, 0x28)
REG64(IOMMUCAPEN, 0x1000)
REG64(IOMMUINTEN, 0x1008)
REG64(INVLTLB, 0x1010)

/* This is on spec, but not on xmu-100 hardware */
REG64(RSIDDIV, 0x8)
REG64(ERSIDDIV, 0x10)
REG64(IOMMUINTNO, 0x30)
REG64(RESUME, 0x1018)

/* Define fields in registers */
FIELD(IOMMUCAP, STAGE_TWO, 0, 1)
FIELD(IOMMUCAPEN, ENABLE, 0, 1)
FIELD(IOMMUINTEN, ENABLE, 0, 1)
FIELD(IOMMUCAUSE, V, 63, 1)
FIELD(IOMMUCAUSE, RSID, 16, 16)
FIELD(IOMMUCAUSE, CAUSE, 0, 16)
#endif
